{"version":3,"file":"itowns_widgets.js","mappings":"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","sources":["webpack://itowns/webpack/universalModuleDefinition","webpack://itowns/./src/Utils/gui/Widget.js","webpack://itowns/./src/Utils/gui/Navigation.js","webpack://itowns/./src/Utils/gui/Minimap.js","webpack://itowns/./src/Utils/gui/Scale.js","webpack://itowns/./src/Utils/gui/Searchbar.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"itowns_widgets\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"itowns_widgets\"] = factory();\n\telse\n\t\troot[\"itowns_widgets\"] = factory();\n})(self, () => {\nreturn ","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classPrivateFieldSet from \"@babel/runtime/helpers/classPrivateFieldSet\";\nimport _classPrivateFieldGet from \"@babel/runtime/helpers/classPrivateFieldGet\";\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) { _checkPrivateRedeclaration(obj, privateMap); privateMap.set(obj, value); }\nfunction _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); } }\nvar _display = /*#__PURE__*/new WeakMap();\n/**\n * An interface that stores common methods for all specific widgets.\n *\n * @hideconstructor\n */\nvar Widget = /*#__PURE__*/function () {\n  function Widget(view) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var defaultOptions = arguments.length > 2 ? arguments[2] : undefined;\n    _classCallCheck(this, Widget);\n    _classPrivateFieldInitSpec(this, _display, {\n      writable: true,\n      value: void 0\n    });\n    this.parentElement = options.parentElement || view.domElement;\n    this.position = options.position || defaultOptions.position;\n    if (!['top-left', 'top-right', 'bottom-left', 'bottom-right', 'top', 'bottom', 'left', 'right'].includes(this.position)) {\n      console.warn('\\'position\\' optional parameter for \\'Widget\\' constructor is not a valid option. ' + \"It will be set to '\".concat(defaultOptions.position, \"'.\"));\n      this.position = defaultOptions.position;\n    }\n\n    // ---------- CREATE A DomElement WITH id, classes AND style RELEVANT TO THE WIDGET PROPERTIES : ----------\n\n    // Create a div containing minimap widget and add it to its specified parent.\n    this.domElement = document.createElement('div');\n    this.parentElement.appendChild(this.domElement);\n\n    // Size widget according to options.\n    this.domElement.style.width = \"\".concat(options.width || options.size || defaultOptions.width, \"px\");\n    this.domElement.style.height = \"\".concat(options.height || options.size || defaultOptions.height, \"px\");\n\n    // Position widget according to options.\n    var positionArray = this.position.split('-');\n    this.domElement.classList.add(\"\".concat(positionArray[0], \"-widget\"));\n    if (positionArray[1]) {\n      this.domElement.classList.add(\"\".concat(positionArray[1], \"-widget\"));\n    } else {\n      // If only one position parameter was given, center the domElement on the other axis.\n      // TODO : at this stage, offsetWidth and offsetHeight do no include borders. This should be worked around.\n      switch (positionArray[0]) {\n        case 'top':\n        case 'bottom':\n          this.domElement.style.left = \"calc(50% - \".concat(this.domElement.offsetWidth / 2, \"px)\");\n          break;\n        case 'left':\n        case 'right':\n          this.domElement.style.top = \"calc(50% - \".concat(this.domElement.offsetHeight / 2, \"px)\");\n          break;\n        default:\n          break;\n      }\n    }\n\n    // Translate widget div according to optional translate parameter.\n    if (options.translate) {\n      this.domElement.style.transform = \"translate(\".concat(options.translate.x || 0, \"px, \").concat(options.translate.y || 0, \"px)\");\n    }\n\n    // Prevent triggering `GlobeControls` and `PlanarControls` mouse or pointer events when clicking the search bar.\n    // For example, this prevents triggering an animated travel when double-clicking search bar in a `GlobeView`.\n    this.domElement.addEventListener('pointerdown', function (e) {\n      e.stopPropagation();\n    });\n    this.domElement.addEventListener('mousedown', function (e) {\n      e.stopPropagation();\n    });\n  }\n\n  /**\n   * Change the widget style `display` property so that the widget becomes visible.\n   */\n  _createClass(Widget, [{\n    key: \"show\",\n    value: function show() {\n      this.domElement.style.display = _classPrivateFieldGet(this, _display);\n    }\n\n    /**\n     * Change the widget style `display` property so that the widget becomes invisible.\n     */\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      _classPrivateFieldSet(this, _display, window.getComputedStyle(this.domElement).display);\n      this.domElement.style.display = 'none';\n    }\n  }]);\n  return Widget;\n}();\nexport default Widget;","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _classPrivateFieldSet from \"@babel/runtime/helpers/classPrivateFieldSet\";\nimport _classPrivateFieldGet from \"@babel/runtime/helpers/classPrivateFieldGet\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _classPrivateMethodInitSpec(obj, privateSet) { _checkPrivateRedeclaration(obj, privateSet); privateSet.add(obj); }\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) { _checkPrivateRedeclaration(obj, privateMap); privateMap.set(obj, value); }\nfunction _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); } }\nfunction _classPrivateMethodGet(receiver, privateSet, fn) { if (!privateSet.has(receiver)) { throw new TypeError(\"attempted to get private field on non-instance\"); } return fn; }\nimport { VIEW_EVENTS } from \"../../Core/View\";\nimport Widget from \"./Widget\";\nvar DEFAULT_OPTIONS = {\n  displayCompass: true,\n  display3DToggle: true,\n  displayZoomIn: true,\n  displayZoomOut: true,\n  animationDuration: 500,\n  position: 'bottom-left',\n  direction: 'column'\n};\nvar DEFAULT_BUTTONS = {\n  compass: {\n    id: 'compass',\n    content: '',\n    info: 'Rotate the camera to face North',\n    parentId: 'widgets'\n  },\n  toggle3D: {\n    id: '3d-button',\n    content: '3D',\n    info: 'Tilt the camera'\n  },\n  zoomIn: {\n    id: 'zoom-in-button',\n    content: '<span class=\"widget-zoom-button-logo\"></span>',\n    info: 'Zoom in',\n    parentId: 'zoom-button-bar'\n  },\n  zoomOut: {\n    id: 'zoom-out-button',\n    content: '<span id=\"zoom-out-logo\" class=\"widget-zoom-button-logo\"></span>',\n    info: 'Zoom out',\n    parentId: 'zoom-button-bar'\n  }\n};\n\n/**\n * A widget menu manager for navigation.\n *\n * To use it, you need to link the widgets' stylesheet to your html webpage. This stylesheet is included in\n * [itowns bundles](https://github.com/iTowns/itowns/releases) if you downloaded them, or it can be found in\n * `node_modules/itowns/examples/css` if you installed iTowns with npm. Otherwise, it can be found at\n * [this link](https://raw.githubusercontent.com/iTowns/itowns/master/examples/css/widgets.css). See\n * [this example](http://www.itowns-project.org/itowns/examples/#widgets_navigation) for more details.\n *\n * @extends Widget\n *\n * @property {HTMLElement}          domElement      An html div containing all navigation widgets.\n * @property {HTMLElement}          parentElement   The parent HTML container of `this.domElement`.\n * @property {HTMLButtonElement}    compass         The HTML button for the compass.\n * @property {HTMLButtonElement}    toggle3D        The HTML button for the 3D/2D toggle button.\n * @property {HTMLButtonElement}    zoomIn          The HTML button for the zoom-in button.\n * @property {HTMLButtonElement}    zoomOut         The HTML button for the zoom-out button.\n *\n * @example\n * // Create a Navigation widget in the bottom-right corner of an iTowns view domElement\n * const navigation = new Navigation(view, { position: 'bottom-right' };\n *\n * // Change the tooltip for the compass :\n * navigation.compass.title = 'new tooltip';\n *\n * // Change the method ran when clicking zoom-in button :\n * function newMethod() {\n *     // do something\n * }\n * navigation.zoomIn.onclick = newMethod;\n */\nvar _view = /*#__PURE__*/new WeakMap();\nvar _action = /*#__PURE__*/new WeakSet();\nvar _addDefaultButton = /*#__PURE__*/new WeakSet();\nvar Navigation = /*#__PURE__*/function (_Widget) {\n  _inherits(Navigation, _Widget);\n  var _super = _createSuper(Navigation);\n  /**\n   * @param   {GlobeView}     view                                    The iTowns view the navigation should be linked\n                                                                      * to. For the moment, only `{@link GlobeView}`\n                                                                      * is supported.\n   * @param   {Object}        options                                 The navigation menu optional configuration.\n   * @param   {HTMLElement}   [options.parentElement=view.domElement] The parent HTML container of the div which\n                                                                      * contains navigation widgets.\n   * @param   {boolean}       [options.displayCompass=true]           Whether the compass widget should be displayed.\n   * @param   {boolean}       [options.display3DToggle=true]          Whether the navigation should include a widget\n                                                                      * to toggle between top and oblique view.\n   * @param   {boolean}       [options.displayZoomIn=true]            Whether the zoom-in widget should be displayed.\n   * @param   {boolean}       [options.displayZoomOut=true]           Whether the zoom-out widget should be displayed.\n   * @param   {number}        [options.animationDuration=500]         The duration of travel animations, when clicking\n                                                                      * navigation widgets.\n   * @param   {string}        [options.position='bottom-left']        Defines which corner of the `parentElement` the\n                                                                      * navigation menu should be displayed to.\n                                                                      * Possible values are `top-left`, `top-right`,\n                                                                      * `bottom-left` and `bottom-right`. If the input\n                                                                      * value does not match one of these, it will be\n                                                                      * defaulted to `bottom-left`.\n   * @param   {string}        [options.direction='column']            Whether the navigation menu should expand\n                                                                      * horizontally or vertically. Possible values\n                                                                      * are `column` and `row`. If the input value\n                                                                      * does not match one of these, it will be\n                                                                      * defaulted to `column`.\n   * @param   {Object}        [options.translate]                     An optional translation of the navigation menu.\n   * @param   {number}        [options.translate.x=0]                 The navigation menu translation along the page\n                                                                      * x-axis.\n   * @param   {number}        [options.translate.y=0]                 The navigation menu translation along the page\n                                                                      * y-axis.\n   */\n  function Navigation(view) {\n    var _options$displayCompa, _options$display3DTog, _options$displayZoomI, _options$displayZoomO;\n    var _this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Navigation);\n    // ---------- BUILD PROPERTIES ACCORDING TO DEFAULT OPTIONS AND OPTIONS PASSED IN PARAMETERS : ----------\n\n    // Check if the view is supported.\n    if (!view.isGlobeView) {\n      throw new Error('\\'Navigation\\' plugin only supports \\'GlobeView\\'. Therefore, the \\'view\\' parameter must be a ' + '\\'GlobeView\\'.');\n    }\n\n    // `top`, `bottom`, `left` and `right` values for `position` option are not relevant for navigation widget.\n    if (['top', 'bottom', 'left', 'right'].includes(options.position)) {\n      console.warn('\\'position\\' optional parameter for \\'Navigation\\' is not a valid option. ' + \"It will be set to '\".concat(DEFAULT_OPTIONS.position, \"'.\"));\n      options.position = DEFAULT_OPTIONS.position;\n    }\n    _this = _super.call(this, view, options, DEFAULT_OPTIONS);\n    _classPrivateMethodInitSpec(_assertThisInitialized(_this), _addDefaultButton);\n    _classPrivateMethodInitSpec(_assertThisInitialized(_this), _action);\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _view, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldSet(_assertThisInitialized(_this), _view, view);\n    _this.direction = options.direction || DEFAULT_OPTIONS.direction;\n    if (!['column', 'row'].includes(_this.direction)) {\n      console.warn('\\'direction\\' optional parameter for \\'Navigation\\' constructor is not a valid option. ' + \"It will be set to '\".concat(DEFAULT_OPTIONS.direction, \"'.\"));\n      _this.direction = DEFAULT_OPTIONS.direction;\n    }\n    _this.animationDuration = options.animationDuration === undefined ? DEFAULT_OPTIONS.animationDuration : options.animationDuration;\n\n    // ---------- CREATE A DomElement WITH id AND classes RELEVANT TO THE WIDGET PROPERTIES : ----------\n\n    // Create a div containing all widgets and add it to its specified parent.\n    _this.domElement.id = 'widgets-navigation';\n\n    // Position widget div according to options.\n    _this.domElement.classList.add(\"\".concat(_this.direction, \"-widget\"));\n\n    // ---------- CREATE THE DEFAULT WIDGETS IF NOT HIDDEN (COMPASS, 3D AND ZOOM BUTTONS) : ----------\n\n    // Add a compass widget if requested.\n    if ((_options$displayCompa = options.displayCompass) !== null && _options$displayCompa !== void 0 ? _options$displayCompa : DEFAULT_OPTIONS.displayCompass) {\n      _this.compass = _classPrivateMethodGet(_assertThisInitialized(_this), _addDefaultButton, _addDefaultButton2).call(_assertThisInitialized(_this), DEFAULT_BUTTONS.compass, function () {\n        _classPrivateMethodGet(_assertThisInitialized(_this), _action, _action2).call(_assertThisInitialized(_this), {\n          heading: 0,\n          tilt: 89.5\n        });\n      });\n\n      // Manage compass rotation when the view's camera is moved.\n      view.addEventListener(VIEW_EVENTS.CAMERA_MOVED, function (event) {\n        _this.compass.style.transform = \"rotate(\".concat(-event.heading, \"deg)\");\n      });\n    }\n\n    // Add a 3D toggle button if requested.\n    if ((_options$display3DTog = options.display3DToggle) !== null && _options$display3DTog !== void 0 ? _options$display3DTog : DEFAULT_OPTIONS.display3DToggle) {\n      _this.toggle3D = _classPrivateMethodGet(_assertThisInitialized(_this), _addDefaultButton, _addDefaultButton2).call(_assertThisInitialized(_this), DEFAULT_BUTTONS.toggle3D, function () {\n        _classPrivateMethodGet(_assertThisInitialized(_this), _action, _action2).call(_assertThisInitialized(_this), {\n          tilt: _classPrivateFieldGet(_assertThisInitialized(_this), _view).controls.getTilt() < 89 ? 89.5 : 40\n        });\n      });\n\n      // Manage button content toggle when the view's camera is moved.\n      view.addEventListener(VIEW_EVENTS.CAMERA_MOVED, function (event) {\n        _this.toggle3D.innerHTML = event.tilt < 89 ? '2D' : '3D';\n      });\n    }\n\n    // Add a zoom-in button if requested.\n    if ((_options$displayZoomI = options.displayZoomIn) !== null && _options$displayZoomI !== void 0 ? _options$displayZoomI : DEFAULT_OPTIONS.displayZoomIn) {\n      _this.zoomIn = _classPrivateMethodGet(_assertThisInitialized(_this), _addDefaultButton, _addDefaultButton2).call(_assertThisInitialized(_this), DEFAULT_BUTTONS.zoomIn, function () {\n        _classPrivateMethodGet(_assertThisInitialized(_this), _action, _action2).call(_assertThisInitialized(_this), {\n          zoom: Math.min(20, _classPrivateFieldGet(_assertThisInitialized(_this), _view).controls.getZoom() + 1)\n        });\n      });\n    }\n\n    // Add a zoom-out button if requested.\n    if ((_options$displayZoomO = options.displayZoomOut) !== null && _options$displayZoomO !== void 0 ? _options$displayZoomO : DEFAULT_OPTIONS.displayZoomOut) {\n      _this.zoomOut = _classPrivateMethodGet(_assertThisInitialized(_this), _addDefaultButton, _addDefaultButton2).call(_assertThisInitialized(_this), DEFAULT_BUTTONS.zoomOut, function () {\n        _classPrivateMethodGet(_assertThisInitialized(_this), _action, _action2).call(_assertThisInitialized(_this), {\n          zoom: Math.max(3, _classPrivateFieldGet(_assertThisInitialized(_this), _view).controls.getZoom() - 1)\n        });\n      });\n    }\n    return _this;\n  }\n\n  /**\n   *\n   * @param   {string}    id              The unique id the created button should be given.\n   * @param   {string}    [content='']    An HTML string defining the content of the button.\n   * @param   {string}    [title='']      An HTML string defining information on the button. This string will be\n                                          * displayed in a tooltip when hovering the button.\n   * @param   {function}  [onclick] The method that should be executed when the button is clicked on.\n   * @param   {string}    [parentId]      The unique id of a button bar in which the created button should be added.\n                                          * A button bar is a group which contains one or several buttons. All\n                                          * buttons created with Navigation are in a button bar. If the given id does\n                                          * not match an already existing button bar, a new button bar will be created\n                                          * with this id. If no id is given, a button bar will be created with no id.\n                                          * The later case can be useful for creating isolated buttons.\n   *\n   * @returns {HTMLButtonElement}     The created button.\n   */\n  _createClass(Navigation, [{\n    key: \"addButton\",\n    value: function addButton(id) {\n      var _this2 = this;\n      var content = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var title = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      var onclick = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n      var parentId = arguments.length > 4 ? arguments[4] : undefined;\n      var buttonBar = document.getElementById(parentId);\n      if (!buttonBar) {\n        buttonBar = this.addButtonBar(parentId);\n      }\n      var button = document.createElement('button');\n      button.className = 'widget-button';\n      button.id = id;\n      button.innerHTML = content;\n      button.title = title;\n      button.onclick = onclick;\n      buttonBar.appendChild(button);\n\n      // The buttons must not be focused using tab key.\n      button.tabIndex = -1;\n      // When releasing the mouse after clicking the button, we give the focus back to the view. Therefore, we can use\n      // key events on the view without having to click the view to grant it focus.\n      window.addEventListener('pointerup', function () {\n        if (document.activeElement === button) {\n          _classPrivateFieldGet(_this2, _view).domElement.focus();\n        }\n      });\n      return button;\n    }\n  }, {\n    key: \"addButtonBar\",\n    value: function addButtonBar(id) {\n      var buttonBar = document.createElement('div');\n      buttonBar.className = 'widget-button-bar';\n      if (id) {\n        buttonBar.id = id;\n      }\n      this.domElement.appendChild(buttonBar);\n      return buttonBar;\n    }\n  }]);\n  return Navigation;\n}(Widget);\nfunction _action2(params) {\n  params.time = this.animationDuration;\n  return _classPrivateFieldGet(this, _view).controls.lookAtCoordinate(params);\n}\nfunction _addDefaultButton2(settings, onclick) {\n  return this.addButton(settings.id, settings.content, settings.info, onclick, settings.parentId);\n}\nexport default Navigation;","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport Coordinates from \"../../Core/Geographic/Coordinates\";\nimport { MAIN_LOOP_EVENTS } from \"../../Core/MainLoop\";\nimport PlanarView from \"../../Core/Prefab/PlanarView\";\nimport { CAMERA_TYPE } from \"../../Renderer/Camera\";\nimport Widget from \"./Widget\";\nvar DEFAULT_OPTIONS = {\n  minScale: 1 / 500000,\n  maxScale: 1 / 5E8,\n  zoomRatio: 1 / 30,\n  width: 150,\n  height: 150,\n  position: 'bottom-left'\n};\n\n/**\n * A widget for minimap\n *\n * To use it, you need to link the widgets' stylesheet to your html webpage. This stylesheet is included in\n * [itowns bundles](https://github.com/iTowns/itowns/releases) if you downloaded them, or it can be found in\n * `node_modules/itowns/examples/css` if you installed iTowns with npm. Otherwise, it can be found at\n * [this link](https://raw.githubusercontent.com/iTowns/itowns/master/examples/css/widgets.css). See\n * [this example](http://www.itowns-project.org/itowns/examples/#widgets_minimap) for more details.\n *\n * @extends Widget\n *\n * @property    {HTMLElement}   domElement      An html div containing the minimap.\n * @property    {HTMLElement}   parentElement   The parent HTML container of `this.domElement`.\n */\nvar Minimap = /*#__PURE__*/function (_Widget) {\n  _inherits(Minimap, _Widget);\n  var _super = _createSuper(Minimap);\n  /**\n   * @param   {GlobeView}             view                                    The iTowns view the minimap should be\n                                                                              * linked to. Only {@link GlobeView} is\n                                                                              * supported at the moment.\n   * @param   {ColorLayer}            layer                                   The {@link ColorLayer} that should be\n                                                                              * displayed on the minimap.\n   * @param   {Object}                [options]                               The minimap optional configuration.\n   * @param   {HTMLElement}           [options.parentElement=view.domElement] The parent HTML container of the div\n                                                                              * which contains minimap widgets.\n   * @param   {number}                [options.size]                          The size of the minimap. It is a number\n                                                                              * that describes both width and height\n                                                                              * in pixels of the minimap.\n   * @param   {number}                [options.width=150]                     The width in pixels of the minimap.\n   * @param   {number}                [options.height=150]                    The height in pixels of the minimap.\n   * @param   {string}                [options.position='bottom-left']        Defines which position within the\n                                                                              * `parentElement` the minimap should be\n                                                                              * displayed to. Possible values are\n                                                                              * `top`, `bottom`, `left`, `right`,\n                                                                              * `top-left`, `top-right`, `bottom-left`\n                                                                              * and `bottom-right`. If the input value\n                                                                              * does not match one of these, it will\n                                                                              * be defaulted to `bottom-left`.\n   * @param   {Object}                [options.translate]                     An optional translation of the minimap.\n   * @param   {number}                [options.translate.x=0]                 The minimap translation along the page\n                                                                              * x-axis.\n   * @param   {number}                [options.translate.y=0]                 The minimap translation along the page\n                                                                              * y-axis.\n   * @param   {HTMLElement|string}    [options.cursor]                        An html element or an HTML string\n                                                                              * describing a cursor showing minimap\n                                                                              * view camera target position at the\n                                                                              * center of the minimap.\n   * @param   {number}                [options.minScale=1/2000]               The minimal scale the minimap can reach.\n   * @param   {number}                [options.maxScale=1/1_250_000]          The maximal scale the minimap can reach.\n   * @param   {number}                [options.zoomRatio=1/30]                The ratio between minimap camera zoom\n                                                                              * and view camera zoom.\n   * @param   {number}                [options.pitch=0.28]                    The screen pixel pitch, used to compute\n                                                                              * view and minimap scale.\n   */\n  function Minimap(view, layer) {\n    var _this;\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _classCallCheck(this, Minimap);\n    // ---------- BUILD PROPERTIES ACCORDING TO DEFAULT OPTIONS AND OPTIONS PASSED IN PARAMETERS : ----------\n\n    if (!view.isGlobeView) {\n      throw new Error('\\'Minimap\\' plugin only supports \\'GlobeView\\'. Therefore, the \\'view\\' parameter must be a ' + '\\'GlobeView\\'.');\n    }\n    if (!layer.isColorLayer) {\n      throw new Error('\\'layer\\' parameter form \\'Minimap\\' constructor should be a \\'ColorLayer\\'.');\n    }\n    _this = _super.call(this, view, options, DEFAULT_OPTIONS);\n    _this.minScale = options.minScale || DEFAULT_OPTIONS.minScale;\n    _this.maxScale = options.maxScale || DEFAULT_OPTIONS.maxScale;\n\n    // TODO : it could be interesting to be able to specify a method as zoomRatio parameter. This method could\n    //  return a zoom ratio from the scale of the minimap.\n    _this.zoomRatio = options.zoomRatio || DEFAULT_OPTIONS.zoomRatio;\n\n    // ---------- this.domElement SETTINGS SPECIFIC TO MINIMAP : ----------\n\n    _this.domElement.id = 'widgets-minimap';\n\n    // Display a cursor at the center of the minimap, if requested.\n    if (options.cursor) {\n      // Wrap cursor domElement inside a div to center it in minimap.\n      var cursorWrapper = document.createElement('div');\n      cursorWrapper.id = 'cursor-wrapper';\n      _this.domElement.appendChild(cursorWrapper);\n\n      // Add specified cursor to its wrapper.\n      if (typeof options.cursor === 'string') {\n        cursorWrapper.innerHTML = options.cursor;\n      } else if (options.cursor instanceof HTMLElement) {\n        cursorWrapper.appendChild(options.cursor);\n      }\n    }\n\n    // ---------- CREATE A MINIMAP View AND DISPLAY DATA PASSED IN Layer PARAMETER : ----------\n\n    _this.view = new PlanarView(_this.domElement, layer.source.extent, {\n      camera: {\n        type: CAMERA_TYPE.ORTHOGRAPHIC\n      },\n      placement: layer.source.extent,\n      // TODO : the default placement should be the view extent for ortho camera\n      noControls: true,\n      maxSubdivisionLevel: view.tileLayer.maxSubdivisionLevel,\n      disableFocusOnStart: true\n    });\n    _this.view.addLayer(layer); // TODO : should this promise be returned by constructor so that user can use it ?\n\n    // Prevent the minimap domElement to get focus when clicked, and prevent click event to be propagated to the\n    // main view controls.\n    _this.domElement.addEventListener('pointerdown', function (event) {\n      event.preventDefault();\n    });\n\n    // Store minimap view camera3D in constant for code convenience.\n    var camera3D = _this.view.camera.camera3D;\n\n    // ---------- UPDATE MINIMAP VIEW WHEN UPDATING THE MAIN VIEW : ----------\n\n    // The minimal and maximal value the minimap camera3D zoom can reach in order to stay in the scale limits.\n    var initialScale = _this.view.getScale(options.pitch);\n    var minZoom = camera3D.zoom * _this.maxScale / initialScale;\n    var maxZoom = camera3D.zoom * _this.minScale / initialScale;\n\n    // Coordinates used to transform position vectors from the main view CRS to the minimap view CRS.\n    var mainViewCoordinates = new Coordinates(view.referenceCrs);\n    var viewCoordinates = new Coordinates(_this.view.referenceCrs);\n    var targetPosition = view.controls.getCameraTargetPosition();\n    view.addFrameRequester(MAIN_LOOP_EVENTS.AFTER_RENDER, function () {\n      // Update minimap camera zoom\n      var distance = view.camera.camera3D.position.distanceTo(targetPosition);\n      var scale = view.getScaleFromDistance(options.pitch, distance);\n      camera3D.zoom = _this.zoomRatio * maxZoom * scale / _this.minScale;\n      camera3D.zoom = Math.min(Math.max(camera3D.zoom, minZoom), maxZoom);\n      camera3D.updateProjectionMatrix();\n\n      // Update minimap camera position.\n      mainViewCoordinates.setFromVector3(view.controls.getCameraTargetPosition());\n      mainViewCoordinates.as(_this.view.referenceCrs, viewCoordinates);\n      camera3D.position.x = viewCoordinates.x;\n      camera3D.position.y = viewCoordinates.y;\n      camera3D.updateMatrixWorld(true);\n      _this.view.notifyChange(camera3D);\n    });\n    return _this;\n  }\n  return _createClass(Minimap);\n}(Widget);\nexport default Minimap;","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport { CONTROL_EVENTS } from \"../../Controls/GlobeControls\";\nimport { GLOBE_VIEW_EVENTS } from \"../../Core/Prefab/GlobeView\";\nimport { PLANAR_CONTROL_EVENT } from \"../../Controls/PlanarControls\";\nimport { VIEW_EVENTS } from \"../../Core/View\";\nimport Widget from \"./Widget\";\nvar DEFAULT_OPTIONS = {\n  width: 200,\n  height: 30,\n  position: 'bottom-left'\n};\n\n/**\n * A widget for scale\n *\n * To use it, you need to link the widgets' stylesheet to your html webpage. This stylesheet is included in\n * [itowns bundles](https://github.com/iTowns/itowns/releases) if you downloaded them, or it can be found in\n * `node_modules/itowns/examples/css` if you installed iTowns with npm. Otherwise, it can be found at\n * [this link](https://raw.githubusercontent.com/iTowns/itowns/master/examples/css/widgets.css). See\n * [this example](http://www.itowns-project.org/itowns/examples/#widgets_scale) for more details.\n *\n * @extends Widget\n *\n * @property    {HTMLElement}   domElement      An html div containing the scale.\n * @property    {HTMLElement}   parentElement   The parent HTML container of `this.domElement`.\n */\nvar Scale = /*#__PURE__*/function (_Widget) {\n  _inherits(Scale, _Widget);\n  var _super = _createSuper(Scale);\n  /**\n   * @param   {View}                  view                                    The iTowns view the scale should be\n                                                                              * linked to. If it is a\n                                                                              * {@link PlanarView} or a\n                                                                              * {@link GlobeView}, the scale will be\n                                                                              * automatically updated. Otherwise, user\n                                                                              * will need to implement the update\n                                                                              * automation using the `Scale.update`\n                                                                              * method.\n   * @param   {Object}                [options]                               The scale optional configuration.\n   * @param   {HTMLElement}           [options.parentElement=view.domElement] The parent HTML container of the div\n                                                                              * which contains scale widgets.\n   * @param   {number}                [options.width=200]                     The width in pixels of the scale.\n   * @param   {number}                [options.height=30]                     The height in pixels of the scale.\n   * @param   {string}                [options.position='bottom-left']        Defines which position within the\n                                                                              * `parentElement` the scale should be\n                                                                              * displayed to. Possible values are\n                                                                              * `top`, `bottom`, `left`, `right`,\n                                                                              * `top-left`, `top-right`, `bottom-left`\n                                                                              * and `bottom-right`. If the input value\n                                                                              * does not match one of these, it will\n                                                                              * be defaulted to `bottom-left`.\n   * @param   {Object}                [options.translate]                     An optional translation of the scale.\n   * @param   {number}                [options.translate.x=0]                 The scale translation along the page\n                                                                              * x-axis.\n   * @param   {number}                [options.translate.y=0]                 The scale translation along the page\n                                                                              * y-axis.\n   */\n  function Scale(view) {\n    var _this;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Scale);\n    // ---------- BUILD PROPERTIES ACCORDING TO DEFAULT OPTIONS AND OPTIONS PASSED IN PARAMETERS : ----------\n\n    _this = _super.call(this, view, options, DEFAULT_OPTIONS);\n\n    // ---------- this.domElement SETTINGS SPECIFIC TO SCALE : ----------\n\n    _this.domElement.id = 'widgets-scale';\n    _this.view = view;\n\n    // Initialize the text content of the scale, which will later be updated by a numerical value.\n    _this.domElement.innerHTML = 'Scale';\n    _this.width = options.width || DEFAULT_OPTIONS.width;\n    if (_this.view.isGlobeView) {\n      _this.view.addEventListener(GLOBE_VIEW_EVENTS.GLOBE_INITIALIZED, function () {\n        _this.update();\n      });\n      _this.view.controls.addEventListener(CONTROL_EVENTS.RANGE_CHANGED, function () {\n        _this.update();\n      });\n    } else if (_this.view.isPlanarView) {\n      _this.view.addEventListener(VIEW_EVENTS.INITIALIZED, function () {\n        _this.update();\n      });\n      _this.view.addEventListener(PLANAR_CONTROL_EVENT.MOVED, function () {\n        _this.update();\n      });\n    } else {\n      console.warn('The \\'view\\' linked to scale widget is neither a \\'GlobeView\\' nor a \\'PlanarView\\'. The ' + 'scale wont automatically update. You can implement its update automation using \\'Scale.update\\' ' + 'method.');\n    }\n    return _this;\n  }\n  _createClass(Scale, [{\n    key: \"addEventListeners\",\n    value: function addEventListeners() {}\n\n    /**\n     * Update the scale size and content according to view camera position.\n     */\n  }, {\n    key: \"update\",\n    value: function update() {\n      // Calculate the rounded metric distance which matches the scale width in pixels.\n      var metricDistance = Math.round(this.view.getPixelsToMeters(this.width));\n      var digit = Math.pow(10, metricDistance.toString().length - 1);\n      metricDistance = Math.round(metricDistance / digit) * digit;\n      var pixelDistance = this.view.getMetersToPixels(metricDistance);\n      var unit = 'm';\n      if (metricDistance >= 1000) {\n        metricDistance /= 1000;\n        unit = 'km';\n      }\n      this.domElement.innerHTML = \"\".concat(metricDistance, \" \").concat(unit);\n      this.domElement.style.width = \"\".concat(pixelDistance, \"px\");\n    }\n  }]);\n  return Scale;\n}(Widget);\nexport default Scale;","import _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _classPrivateFieldGet from \"@babel/runtime/helpers/classPrivateFieldGet\";\nimport _classPrivateFieldSet from \"@babel/runtime/helpers/classPrivateFieldSet\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) { _checkPrivateRedeclaration(obj, privateMap); privateMap.set(obj, value); }\nfunction _checkPrivateRedeclaration(obj, privateCollection) { if (privateCollection.has(obj)) { throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); } }\nimport Fetcher from \"../../Provider/Fetcher\";\nimport Widget from \"./Widget\";\nvar DEFAULT_OPTIONS = {\n  width: 300,\n  height: 38,\n  position: 'top',\n  maxSuggestionNumber: 10,\n  fontSize: 16,\n  placeholder: 'Search location'\n};\nfunction addActive(htmlElements, index) {\n  var _htmlElements$index;\n  if (!htmlElements) {\n    return index;\n  }\n  removeAllActives(htmlElements);\n  if (index >= htmlElements.length) {\n    index = 0;\n  } else if (index < 0) {\n    index = htmlElements.length - 1;\n  }\n  (_htmlElements$index = htmlElements[index]) === null || _htmlElements$index === void 0 ? void 0 : _htmlElements$index.classList.add('active');\n  return index;\n}\nfunction removeAllActives(htmlElements) {\n  for (var i = 0; i < htmlElements.length; i++) {\n    htmlElements[i].classList.remove('active');\n  }\n}\nfunction eraseSuggestionList(form) {\n  while (form.children.length > 1) {\n    form.removeChild(form.lastChild);\n  }\n}\n\n/**\n * A widget for searchbar\n *\n * To use it, you need to link the widgets' stylesheet to your html webpage. This stylesheet is included in\n * [itowns bundles](https://github.com/iTowns/itowns/releases) if you downloaded them, or it can be found in\n * `node_modules/itowns/examples/css` if you installed iTowns with npm. Otherwise, it can be found at\n * [this link](https://raw.githubusercontent.com/iTowns/itowns/master/examples/css/widgets.css). See\n * [this example](http://www.itowns-project.org/itowns/examples/#widgets_searchbar) for more details.\n *\n * @extends Widget\n *\n * @property    {HTMLElement}   domElement      An html div containing the searchbar.\n * @property    {HTMLElement}   parentElement   The parent HTML container of `this.domElement`.\n */\nvar _onSelected = /*#__PURE__*/new WeakMap();\nvar Searchbar = /*#__PURE__*/function (_Widget) {\n  _inherits(Searchbar, _Widget);\n  var _super = _createSuper(Searchbar);\n  /**\n   * @param   {View}          view                                    The iTowns view the searchbar should be linked\n                                                                      * to.\n   *\n   * @param   {Object}        geocodingOptions                        Configuration for geocoding.\n   * @param   {URL}           geocodingOptions.url                    The URL of a geocoding service that should be\n                                                                      * used to build suggestions.\n   * @param   {function}      geocodingOptions.parser                 A method to parse fetched results from geocoding\n                                                                      * url into a Map object. For each entry of this\n                                                                      * Map, the key must be a string that will be\n                                                                      * displayed as the html content of each\n                                                                      * suggestion bellow the searchbar. The value\n                                                                      * associated to the key is whatever the user\n                                                                      * wants. The value is the parameter that is\n                                                                      * passed to the `onSelected` method (specified\n                                                                      * in another `geocodingOptions` parameter).\n   * @param   {function}      [geocodingOptions.onSelected]           A method which describes what should be done\n                                                                      * when user selects a location (by clicking or\n                                                                      * hitting enter on a suggestion). The only\n                                                                      * parameter of this method is the value mapped\n                                                                      * with `geocodingOptions.parser` method.\n   *\n   * @param   {Object}        [options]                               The searchbar optional configuration.\n   * @param   {HTMLElement}   [options.parentElement=view.domElement] The parent HTML container of the div which\n                                                                      * contains searchbar widgets.\n   * @param   {number}        [options.size]                          The size of the searchbar. It is a number that\n                                                                      * describes both width and height in pixels of\n                                                                      * the searchbar.\n   * @param   {number}        [options.width=300]                     The width in pixels of the searchbar.\n   * @param   {number}        [options.height=38]                     The height in pixels of the searchbar.\n   * @param   {string}        [options.position='top']                Defines which position within the\n                                                                      * `parentElement` the searchbar should be\n                                                                      * displayed to. Possible values are `top`,\n                                                                      * `bottom`, `left`, `right`, `top-left`,\n                                                                      * `top-right`, `bottom-left` and `bottom-right`.\n                                                                      * If the input value does not match one of\n                                                                      * these, it will be defaulted to `top`.\n   * @param   {Object}        [options.translate]                     An optional translation of the searchbar.\n   * @param   {number}        [options.translate.x=0]                 The searchbar translation along the page x-axis.\n   * @param   {number}        [options.translate.y=0]                 The searchbar translation along the page y-axis.\n   * @param   {number}        [options.fontSize=16]                   The font size in pixel of the searchbar content.\n   * @param   {number}        [options.maxSuggestionNumber=10]        The maximum number of suggestions that should\n                                                                      * appear under the searchbar.\n   * @param   {string}        [options.placeholder='Search location'] The placeholder that appears in the searchbar\n                                                                      * when nothing has yet been typed.\n   */\n  function Searchbar(view, geocodingOptions) {\n    var _geocodingOptions$onS;\n    var _this;\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _classCallCheck(this, Searchbar);\n    // ---------- BUILD PROPERTIES ACCORDING TO DEFAULT OPTIONS AND OPTIONS PASSED IN PARAMETERS : ----------\n    _this = _super.call(this, view, options, DEFAULT_OPTIONS);\n\n    // Check if `geocodingOptions` parameter was correctly specified.\n    _classPrivateFieldInitSpec(_assertThisInitialized(_this), _onSelected, {\n      writable: true,\n      value: void 0\n    });\n    if (!geocodingOptions || !geocodingOptions.url || !geocodingOptions.parser || typeof geocodingOptions.parser !== 'function') {\n      throw new Error('\\'geocodingOptions\\' parameter for \\'Searchbar\\' constructor is not a valid option. Please refer to ' + 'the documentation.');\n    }\n    _classPrivateFieldSet(_assertThisInitialized(_this), _onSelected, (_geocodingOptions$onS = geocodingOptions.onSelected) !== null && _geocodingOptions$onS !== void 0 ? _geocodingOptions$onS : function () {});\n\n    // ---------- this.domElement SETTINGS SPECIFIC TO SEARCHBAR : ----------\n\n    _this.domElement.id = 'widgets-searchbar';\n    _this.domElement.style.height = 'auto';\n    var form = document.createElement('form');\n    form.setAttribute('autocomplete', 'off');\n    form.id = 'searchbar-autocompletion-form';\n    _this.domElement.appendChild(form);\n    var input = document.createElement('input');\n    input.setAttribute('type', 'text');\n    input.setAttribute('name', 'mySearch');\n    input.setAttribute('placeholder', options.placeholder || DEFAULT_OPTIONS.placeholder);\n    input.style.height = \"\".concat(options.height || options.size || DEFAULT_OPTIONS.height, \"px\");\n    input.style.fontSize = \"\".concat(options.fontSize || DEFAULT_OPTIONS.fontSize, \"px\");\n    form.appendChild(input);\n\n    // currentFocus variable stores the index of the suggestions that is focused by user, either with mouse or arrow\n    // keys.\n    var currentFocus;\n\n    // ----------  BUILD AUTOCOMPLETION SUGGESTIONS LIST WHEN TYPING THE SEARCHBAR INPUT : ----------\n\n    input.addEventListener('input', function () {\n      var value = input.value;\n\n      // Close any already opened list of autocompleted values\n      eraseSuggestionList(form);\n      currentFocus = -1;\n      if (!value) {\n        return false;\n      }\n      geocodingOptions.url.searchParams.set('text', value);\n      Fetcher.json(geocodingOptions.url).then(function (geocodingResult) {\n        var result = geocodingOptions.parser(geocodingResult);\n        var i = 0;\n        result.forEach(function (info, location) {\n          // Stop looping through the map if enough location have been proceeded.\n          if (i === Math.min(result.size, options.maxSuggestionNumber || DEFAULT_OPTIONS.maxSuggestionNumber)) {\n            return;\n          }\n          var mapIndex = i;\n          i++;\n          var index = location.toUpperCase().indexOf(value.toUpperCase());\n          if (index > -1) {\n            var autocompleteItem = document.createElement('div');\n            autocompleteItem.style.minHeight = input.style.height;\n            autocompleteItem.style.fontSize = \"\".concat(options.fontSize || DEFAULT_OPTIONS.fontSize, \"px\");\n\n            // Make the matching letters bold.\n            var start = location.slice(0, index);\n            var bold = location.slice(index, index + value.length);\n            var end = location.slice(index + value.length, location.length);\n            autocompleteItem.innerHTML = \"<p>\".concat(start, \"<strong>\").concat(bold, \"</strong>\").concat(end, \"</p>\");\n            // Store the current location value as an attribute of autocompleteItem div.\n            autocompleteItem.setAttribute('location', location);\n            form.appendChild(autocompleteItem);\n\n            // eslint-disable-next-line no-loop-func\n            autocompleteItem.addEventListener('mouseover', function () {\n              removeAllActives(form.children);\n              currentFocus = mapIndex;\n              autocompleteItem.classList.add('active');\n            });\n            autocompleteItem.addEventListener('click', function () {\n              _classPrivateFieldGet(_assertThisInitialized(_this), _onSelected).call(_assertThisInitialized(_this), info);\n              input.value = autocompleteItem.getAttribute('location');\n              eraseSuggestionList(form);\n            });\n          }\n        });\n      });\n    });\n\n    // ---------- MANAGE KEYBOARD INTERACTIONS ON AUTOCOMPLETION SUGGESTIONS : ----------\n\n    // When searchbar is positioned at the bottom of the screen (therefore is a flex with `column-reverse`\n    // direction, we must exchange up and down arrow actions.\n    var topOrBottom = (options.position || DEFAULT_OPTIONS.position).includes('top') ? 1 : -1;\n    input.addEventListener('keydown', function (event) {\n      event.stopPropagation();\n      var completionSuggestions = form.getElementsByTagName('div');\n      switch (event.code) {\n        case 'Escape':\n          eraseSuggestionList(form);\n          input.value = '';\n          view.domElement.focus();\n          break;\n        case 'ArrowDown':\n          event.preventDefault();\n          currentFocus = addActive(completionSuggestions, currentFocus + topOrBottom);\n          break;\n        case 'ArrowUp':\n          event.preventDefault();\n          currentFocus = addActive(completionSuggestions, currentFocus - topOrBottom);\n          break;\n        case 'Enter':\n          event.preventDefault();\n          if (completionSuggestions[Math.max(currentFocus, 0)]) {\n            completionSuggestions[Math.max(currentFocus, 0)].click();\n            view.domElement.focus();\n          }\n          break;\n        default:\n          break;\n      }\n    });\n\n    // ---------- MANAGE FOCUS AND ACTIVE SUGGESTION WHEN USER ENTERS OR LEAVES THE SEARCHBAR : ----------\n\n    // User clicks the searchbar.\n    input.addEventListener('focus', function () {\n      form.classList.add('focus');\n    });\n    // User clicks out of the searchbar.\n    input.addEventListener('blur', function () {\n      form.classList.remove('focus');\n      removeAllActives(form.children);\n    });\n    // Cursor leaves the searchbar.\n    form.addEventListener('mouseleave', function () {\n      removeAllActives(form.children);\n      currentFocus = -1;\n    });\n    return _this;\n  }\n  return _createClass(Searchbar);\n}(Widget);\nexport default Searchbar;"],"names":["root","factory","exports","module","define","amd","self","_display","WeakMap","Widget","view","obj","privateMap","value","options","arguments","length","undefined","defaultOptions","this","writable","privateCollection","has","TypeError","_checkPrivateRedeclaration","set","parentElement","domElement","position","includes","console","warn","concat","document","createElement","appendChild","style","width","size","height","positionArray","split","classList","add","left","offsetWidth","top","offsetHeight","translate","transform","x","y","addEventListener","e","stopPropagation","key","display","window","getComputedStyle","_classPrivateMethodInitSpec","privateSet","_classPrivateMethodGet","receiver","fn","DEFAULT_OPTIONS","displayCompass","display3DToggle","displayZoomIn","displayZoomOut","animationDuration","direction","DEFAULT_BUTTONS","compass","id","content","info","parentId","toggle3D","zoomIn","zoomOut","_view","_action","WeakSet","_addDefaultButton","_action2","params","time","controls","lookAtCoordinate","_addDefaultButton2","settings","onclick","addButton","_Widget","Navigation","Derived","hasNativeReflectConstruct","_super","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","call","_isNativeReflectConstruct","result","Super","NewTarget","constructor","apply","_options$displayCompa","_options$display3DTog","_options$displayZoomI","_options$displayZoomO","_this","isGlobeView","Error","heading","tilt","event","getTilt","innerHTML","zoom","Math","min","getZoom","max","_this2","title","buttonBar","getElementById","addButtonBar","button","className","tabIndex","activeElement","focus","minScale","maxScale","zoomRatio","Minimap","layer","isColorLayer","cursor","cursorWrapper","HTMLElement","PlanarView","source","extent","camera","type","placement","noControls","maxSubdivisionLevel","tileLayer","disableFocusOnStart","addLayer","preventDefault","camera3D","initialScale","getScale","pitch","minZoom","maxZoom","mainViewCoordinates","Coordinates","referenceCrs","viewCoordinates","targetPosition","getCameraTargetPosition","addFrameRequester","distance","distanceTo","scale","getScaleFromDistance","updateProjectionMatrix","setFromVector3","as","updateMatrixWorld","notifyChange","Scale","update","isPlanarView","metricDistance","round","getPixelsToMeters","digit","pow","toString","pixelDistance","getMetersToPixels","unit","maxSuggestionNumber","fontSize","placeholder","addActive","htmlElements","index","_htmlElements$index","removeAllActives","i","remove","eraseSuggestionList","form","children","removeChild","lastChild","_onSelected","Searchbar","geocodingOptions","_geocodingOptions$onS","url","parser","onSelected","setAttribute","currentFocus","input","searchParams","Fetcher","then","geocodingResult","forEach","location","mapIndex","toUpperCase","indexOf","autocompleteItem","minHeight","start","slice","bold","end","getAttribute","topOrBottom","completionSuggestions","getElementsByTagName","code","click"],"sourceRoot":""}